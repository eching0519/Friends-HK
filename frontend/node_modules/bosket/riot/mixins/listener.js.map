{"version":3,"sources":["../../../src/riot/mixins/listener.js"],"names":["listenerMixin","eventType","callback","regulate","init","ticking","onEvent","window","requestAnimationFrame","event","one","document","addEventListener","removeEventListener"],"mappings":";;;;;AAAO,IAAMA,wCAAgB,SAAhBA,aAAgB;AAAA,8BACzBC,SADyB;AAAA,QACzBA,SADyB,kCACb,OADa;AAAA,QAEzBC,QAFyB,QAEzBA,QAFyB;AAAA,6BAGzBC,QAHyB;AAAA,QAGzBA,QAHyB,iCAGd,KAHc;AAAA,WAItB;AACHC,cAAM,gBAAW;AACb,gBAAIC,UAAU,KAAd;;AAEA,gBAAMC,UAAU,SAAVA,OAAU,QAAS;AACrB,oBAAGJ,QAAH,EAAa;AACT,wBAAGC,QAAH,EAAa;AACT,4BAAG,CAACE,OAAJ,EAAa;AACTE,mCAAOC,qBAAP,CAA6B;AAAA,uCAAMN,SAASO,KAAT,EAAgB;AAAA,2CAAMJ,UAAU,KAAhB;AAAA,iCAAhB,CAAN;AAAA,6BAA7B;AACH;AACDA,kCAAU,IAAV;AACH,qBALD,MAMIH,SAASO,KAAT;AACP;AACJ,aAVD;AAWA,iBAAKC,GAAL,CAAS,OAAT,EAAkB,YAAM;AACpBC,yBAASC,gBAAT,CAA0BX,SAA1B,EAAqCK,OAArC;AACH,aAFD;AAGA,iBAAKI,GAAL,CAAS,SAAT,EAAoB,YAAM;AACtBC,yBAASE,mBAAT,CAA6BZ,SAA7B,EAAwCK,OAAxC;AACH,aAFD;AAGH;AArBE,KAJsB;AAAA,CAAtB","file":"listener.js","sourcesContent":["export const listenerMixin = ({\n    eventType = \"click\",\n    callback,\n    regulate = false\n}) => ({\n    init: function() {\n        let ticking = false\n\n        const onEvent = event => {\n            if(callback) {\n                if(regulate) {\n                    if(!ticking) {\n                        window.requestAnimationFrame(() => callback(event, () => ticking = false))\n                    }\n                    ticking = true\n                } else\n                    callback(event)\n            }\n        }\n        this.one(\"mount\", () => {\n            document.addEventListener(eventType, onEvent)\n        })\n        this.one(\"unmount\", () => {\n            document.removeEventListener(eventType, onEvent)\n        })\n    }\n})\n"]}