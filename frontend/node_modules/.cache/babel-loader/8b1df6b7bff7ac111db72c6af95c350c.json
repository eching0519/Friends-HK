{"ast":null,"code":"import _slicedToArray from \"Z:\\\\3100project\\\\Friends-HK\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"Z:\\\\3100project\\\\Friends-HK\\\\frontend\\\\src\\\\app\\\\App.js\";\nimport React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './App.scss';\nimport AppRoutes from './AppRoutes';\nimport Navbar from './shared/Navbar'; // import Sidebar from './shared/Sidebar';\n\nimport SettingsPanel from './shared/SettingsPanel';\nimport Footer from './shared/Footer';\nimport { withTranslation } from \"react-i18next\"; // class App extends Component {\n//   state = {}\n//   componentDidMount() {\n//     this.onRouteChanged();\n//   }\n//   render () {\n//     let user = JSON.parse(sessionStorage.getItem('UserProfile'));\n//     console.log(user)\n//     let navbarComponent = !this.state.isFullPageLayout ? <Navbar user={user}/> : '';\n//     // let sidebarComponent = !this.state.isFullPageLayout ? <Sidebar/> : '';\n//     let SettingsPanelComponent = !this.state.isFullPageLayout ? <SettingsPanel/> : '';\n//     let footerComponent = !this.state.isFullPageLayout ? <Footer/> : '';\n//     return (\n//       <div className=\"container-scroller\">\n//         { navbarComponent }\n//         <div className=\"container-fluid page-body-wrapper\">\n//           {/* { sidebarComponent } */}\n//           <div className=\"main-panel\">\n//             <div className=\"content-wrapper\">\n//               <AppRoutes user={user}/>\n//               { SettingsPanelComponent }\n//             </div>\n//             {/* { footerComponent } */}\n//           </div>\n//         </div>\n//       </div>\n//     );\n//   }\n//   componentDidUpdate(prevProps) {\n//     if (this.props.location !== prevProps.location) {\n//       this.onRouteChanged();\n//     }\n//   }\n//   onRouteChanged() {\n//     console.log(\"ROUTE CHANGED\");\n//     const { i18n } = this.props;\n//     const body = document.querySelector('body');\n//     if(this.props.location.pathname === '/layout/RtlLayout') {\n//       body.classList.add('rtl');\n//       i18n.changeLanguage('ar');\n//     }\n//     else {\n//       body.classList.remove('rtl')\n//       i18n.changeLanguage('en');\n//     }\n//     window.scrollTo(0, 0);\n//     const fullPageLayoutRoutes = ['/login', '/register', '/verify']\n//     fullPageLayoutRoutes.push('/user-pages/lockscreen', '/error-pages/error-404', '/error-pages/error-500', '/general-pages/landing-page');\n//     for ( let i = 0; i < fullPageLayoutRoutes.length; i++ ) {\n//       if (this.props.location.pathname === fullPageLayoutRoutes[i]) {\n//         this.setState({\n//           isFullPageLayout: true\n//         })\n//         document.querySelector('.page-body-wrapper').classList.add('full-page-wrapper');\n//         break;\n//       } else {\n//         this.setState({\n//           isFullPageLayout: false\n//         })\n//         document.querySelector('.page-body-wrapper').classList.remove('full-page-wrapper');\n//       }\n//     }\n//   }\n// }\n\nconst App = props => {\n  let myUser = JSON.parse(sessionStorage.getItem('UserProfile'));\n\n  const _useState = useState(myUser),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const _useState3 = useState(props.location),\n        _useState4 = _slicedToArray(_useState3, 2),\n        location = _useState4[0],\n        setLocation = _useState4[1];\n\n  const _useState5 = useState(true),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isFullPageLayout = _useState6[0],\n        setIsFullPageLayout = _useState6[1];\n\n  useEffect(() => {\n    if (user === undefined) {\n      window.location.pathname = \"/login\";\n      return;\n    }\n\n    console.log(\"ROUTE CHANGED\");\n    const i18n = props.i18n;\n    const body = document.querySelector('body');\n\n    if (location.pathname === '/layout/RtlLayout') {\n      body.classList.add('rtl');\n      i18n.changeLanguage('ar');\n    } else {\n      body.classList.remove('rtl');\n      i18n.changeLanguage('en');\n    }\n\n    window.scrollTo(0, 0);\n    const fullPageLayoutRoutes = ['/login', '/register', '/verify'];\n    fullPageLayoutRoutes.push('/user-pages/lockscreen', '/error-pages/error-404', '/error-pages/error-500', '/general-pages/landing-page');\n\n    for (let i = 0; i < fullPageLayoutRoutes.length; i++) {\n      if (props.location.pathname === fullPageLayoutRoutes[i]) {\n        setIsFullPageLayout(true);\n        document.querySelector('.page-body-wrapper').classList.add('full-page-wrapper');\n        break;\n      } else {\n        setIsFullPageLayout(false);\n        document.querySelector('.page-body-wrapper').classList.remove('full-page-wrapper');\n      }\n    }\n  }, [location]);\n  let navbarComponent = !isFullPageLayout ? React.createElement(Navbar, {\n    user: user,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }) : ''; // let sidebarComponent = !this.state.isFullPageLayout ? <Sidebar/> : '';\n\n  let SettingsPanelComponent = !isFullPageLayout ? React.createElement(SettingsPanel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }) : '';\n  let footerComponent = !isFullPageLayout ? React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }) : '';\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"container-scroller\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, navbarComponent, React.createElement(\"div\", {\n    className: \"container-fluid page-body-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"main-panel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(AppRoutes, {\n    user: user,\n    setUser: setUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), SettingsPanelComponent)))));\n};\n\nexport default withTranslation()(withRouter(App));","map":{"version":3,"sources":["Z:\\3100project\\Friends-HK\\frontend\\src\\app\\App.js"],"names":["React","useEffect","useState","withRouter","AppRoutes","Navbar","SettingsPanel","Footer","withTranslation","App","props","myUser","JSON","parse","sessionStorage","getItem","user","setUser","location","setLocation","isFullPageLayout","setIsFullPageLayout","undefined","window","pathname","console","log","i18n","body","document","querySelector","classList","add","changeLanguage","remove","scrollTo","fullPageLayoutRoutes","push","i","length","navbarComponent","SettingsPanelComponent","footerComponent"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,YAAP;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,MAAP,MAAmB,iBAAnB,C,CACA;;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,eAAT,QAAgC,eAAhC,C,CAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,MAAMC,GAAG,GAAIC,KAAD,IAAW;AACrB,MAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAAX,CAAb;;AADqB,oBAEGb,QAAQ,CAACS,MAAD,CAFX;AAAA;AAAA,QAEdK,IAFc;AAAA,QAERC,OAFQ;;AAAA,qBAIWf,QAAQ,CAACQ,KAAK,CAACQ,QAAP,CAJnB;AAAA;AAAA,QAIdA,QAJc;AAAA,QAIJC,WAJI;;AAAA,qBAK2BjB,QAAQ,CAAC,IAAD,CALnC;AAAA;AAAA,QAKdkB,gBALc;AAAA,QAKIC,mBALJ;;AAOrBpB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,IAAI,KAAKM,SAAb,EAAwB;AACtBC,MAAAA,MAAM,CAACL,QAAP,CAAgBM,QAAhB,GAA2B,QAA3B;AACA;AACD;;AAEDC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AANc,UAONC,IAPM,GAOGjB,KAPH,CAONiB,IAPM;AAQd,UAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb;;AACA,QAAGZ,QAAQ,CAACM,QAAT,KAAsB,mBAAzB,EAA8C;AAC5CI,MAAAA,IAAI,CAACG,SAAL,CAAeC,GAAf,CAAmB,KAAnB;AACAL,MAAAA,IAAI,CAACM,cAAL,CAAoB,IAApB;AACD,KAHD,MAIK;AACHL,MAAAA,IAAI,CAACG,SAAL,CAAeG,MAAf,CAAsB,KAAtB;AACAP,MAAAA,IAAI,CAACM,cAAL,CAAoB,IAApB;AACD;;AACDV,IAAAA,MAAM,CAACY,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACA,UAAMC,oBAAoB,GAAG,CAAC,QAAD,EAAW,WAAX,EAAwB,SAAxB,CAA7B;AACAA,IAAAA,oBAAoB,CAACC,IAArB,CAA0B,wBAA1B,EAAoD,wBAApD,EAA8E,wBAA9E,EAAwG,6BAAxG;;AAEA,SAAM,IAAIC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGF,oBAAoB,CAACG,MAA1C,EAAkDD,CAAC,EAAnD,EAAwD;AACtD,UAAI5B,KAAK,CAACQ,QAAN,CAAeM,QAAf,KAA4BY,oBAAoB,CAACE,CAAD,CAApD,EAAyD;AACvDjB,QAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACAQ,QAAAA,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,EAA6CC,SAA7C,CAAuDC,GAAvD,CAA2D,mBAA3D;AACA;AACD,OAJD,MAIO;AACLX,QAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACAQ,QAAAA,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,EAA6CC,SAA7C,CAAuDG,MAAvD,CAA8D,mBAA9D;AACD;AACF;AACF,GA/BQ,EA+BN,CAAChB,QAAD,CA/BM,CAAT;AAiCA,MAAIsB,eAAe,GAAG,CAACpB,gBAAD,GAAoB,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAEJ,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAApB,GAA4C,EAAlE,CAxCqB,CAyCrB;;AACA,MAAIyB,sBAAsB,GAAG,CAACrB,gBAAD,GAAoB,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAApB,GAAuC,EAApE;AACA,MAAIsB,eAAe,GAAG,CAACtB,gBAAD,GAAoB,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAApB,GAAgC,EAAtD;AACA,SACE,0CACE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIoB,eADJ,EAEE;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAExB,IAAjB;AAAuB,IAAA,OAAO,EAAEC,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEIwB,sBAFJ,CADF,CAFF,CAFF,CADF,CADF;AAiBD,CA7DD;;AA+DA,eAAejC,eAAe,GAAIL,UAAU,CAACM,GAAD,CAAd,CAA9B","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport './App.scss';\r\nimport AppRoutes from './AppRoutes';\r\nimport Navbar from './shared/Navbar';\r\n// import Sidebar from './shared/Sidebar';\r\nimport SettingsPanel from './shared/SettingsPanel';\r\nimport Footer from './shared/Footer';\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\n\r\n// class App extends Component {\r\n//   state = {}\r\n//   componentDidMount() {\r\n//     this.onRouteChanged();\r\n//   }\r\n\r\n//   render () {\r\n//     let user = JSON.parse(sessionStorage.getItem('UserProfile'));\r\n//     console.log(user)\r\n\r\n//     let navbarComponent = !this.state.isFullPageLayout ? <Navbar user={user}/> : '';\r\n//     // let sidebarComponent = !this.state.isFullPageLayout ? <Sidebar/> : '';\r\n//     let SettingsPanelComponent = !this.state.isFullPageLayout ? <SettingsPanel/> : '';\r\n//     let footerComponent = !this.state.isFullPageLayout ? <Footer/> : '';\r\n//     return (\r\n//       <div className=\"container-scroller\">\r\n//         { navbarComponent }\r\n//         <div className=\"container-fluid page-body-wrapper\">\r\n//           {/* { sidebarComponent } */}\r\n//           <div className=\"main-panel\">\r\n//             <div className=\"content-wrapper\">\r\n//               <AppRoutes user={user}/>\r\n//               { SettingsPanelComponent }\r\n//             </div>\r\n//             {/* { footerComponent } */}\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   componentDidUpdate(prevProps) {\r\n//     if (this.props.location !== prevProps.location) {\r\n//       this.onRouteChanged();\r\n//     }\r\n//   }\r\n\r\n//   onRouteChanged() {\r\n//     console.log(\"ROUTE CHANGED\");\r\n//     const { i18n } = this.props;\r\n//     const body = document.querySelector('body');\r\n//     if(this.props.location.pathname === '/layout/RtlLayout') {\r\n//       body.classList.add('rtl');\r\n//       i18n.changeLanguage('ar');\r\n//     }\r\n//     else {\r\n//       body.classList.remove('rtl')\r\n//       i18n.changeLanguage('en');\r\n//     }\r\n//     window.scrollTo(0, 0);\r\n//     const fullPageLayoutRoutes = ['/login', '/register', '/verify']\r\n//     fullPageLayoutRoutes.push('/user-pages/lockscreen', '/error-pages/error-404', '/error-pages/error-500', '/general-pages/landing-page');\r\n    \r\n//     for ( let i = 0; i < fullPageLayoutRoutes.length; i++ ) {\r\n//       if (this.props.location.pathname === fullPageLayoutRoutes[i]) {\r\n//         this.setState({\r\n//           isFullPageLayout: true\r\n//         })\r\n//         document.querySelector('.page-body-wrapper').classList.add('full-page-wrapper');\r\n//         break;\r\n//       } else {\r\n//         this.setState({\r\n//           isFullPageLayout: false\r\n//         })\r\n//         document.querySelector('.page-body-wrapper').classList.remove('full-page-wrapper');\r\n//       }\r\n//     }\r\n//   }\r\n\r\n// }\r\n\r\nconst App = (props) => {\r\n  let myUser = JSON.parse(sessionStorage.getItem('UserProfile'));\r\n  const [user, setUser] = useState(myUser)\r\n\r\n  const [location, setLocation] = useState(props.location)\r\n  const [isFullPageLayout, setIsFullPageLayout] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (user === undefined) {\r\n      window.location.pathname = \"/login\"\r\n      return;\r\n    }\r\n\r\n    console.log(\"ROUTE CHANGED\");\r\n    const { i18n } = props;\r\n    const body = document.querySelector('body');\r\n    if(location.pathname === '/layout/RtlLayout') {\r\n      body.classList.add('rtl');\r\n      i18n.changeLanguage('ar');\r\n    }\r\n    else {\r\n      body.classList.remove('rtl')\r\n      i18n.changeLanguage('en');\r\n    }\r\n    window.scrollTo(0, 0);\r\n    const fullPageLayoutRoutes = ['/login', '/register', '/verify']\r\n    fullPageLayoutRoutes.push('/user-pages/lockscreen', '/error-pages/error-404', '/error-pages/error-500', '/general-pages/landing-page');\r\n    \r\n    for ( let i = 0; i < fullPageLayoutRoutes.length; i++ ) {\r\n      if (props.location.pathname === fullPageLayoutRoutes[i]) {\r\n        setIsFullPageLayout(true);\r\n        document.querySelector('.page-body-wrapper').classList.add('full-page-wrapper');\r\n        break;\r\n      } else {\r\n        setIsFullPageLayout(false);\r\n        document.querySelector('.page-body-wrapper').classList.remove('full-page-wrapper');\r\n      }\r\n    }\r\n  }, [location]);\r\n\r\n  let navbarComponent = !isFullPageLayout ? <Navbar user={user}/> : '';\r\n  // let sidebarComponent = !this.state.isFullPageLayout ? <Sidebar/> : '';\r\n  let SettingsPanelComponent = !isFullPageLayout ? <SettingsPanel/> : '';\r\n  let footerComponent = !isFullPageLayout ? <Footer/> : '';\r\n  return (\r\n    <>\r\n      <div className=\"container-scroller\">\r\n        { navbarComponent }\r\n        <div className=\"container-fluid page-body-wrapper\">\r\n          {/* { sidebarComponent } */}\r\n          <div className=\"main-panel\">\r\n            <div className=\"content-wrapper\">\r\n              <AppRoutes user={user} setUser={setUser} />\r\n              { SettingsPanelComponent }\r\n            </div>\r\n            {/* { footerComponent } */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withTranslation() (withRouter(App));\r\n"]},"metadata":{},"sourceType":"module"}